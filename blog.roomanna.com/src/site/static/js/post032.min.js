!function t(e,n,r){function o(a,i){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(u)return u(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(t){var n=e[a][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[a].exports}for(var u="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";t(["jquery","seedrandom","common-demo"],function(t,e,n){function r(t,e,n){var r,o,u=[],a=(Math.floor(256/n),Math.floor(e.length/4));for(r=0;r<n;r++)o=4*Math.floor(t()*a),u.push({center:[e[o],e[o+1],e[o+2]],sum:[0,0,0],count:0,valid:!1});return u}function o(t,e){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)}function u(t,e){var n,r,u=0,a=Number.MAX_VALUE;for(n=0;n<t.length;n++)r=o(t[n].center,e),r<a&&(a=r,u=n);return u}function a(t,e){t.sum[0]+=e[0],t.sum[1]+=e[1],t.sum[2]+=e[2],t.count++}function i(t,e){var n,r,u,a=0;for(n=0;n<e.length;n++)r=e[n],r.count>0?(u=[Math.round(r.sum[0]/r.count),Math.round(r.sum[1]/r.count),Math.round(r.sum[2]/r.count)],r.valid=!0):(u=[Math.floor(256*t()),Math.floor(256*t()),Math.floor(256*t())],r.valid=!1),a+=o(r.center,u),r.center=u,r.sum=[0,0,0],r.count=0;return a}function c(t,e,n,o,c){var s,f,d,h,l=0,v=Number.MAX_VALUE;for(d=r(t,e,n);v>o&&l<c;){for(s=0;s<e.length;s+=4)f=[e[s],e[s+1],e[s+2]],h=u(d,f),a(d[h],f);v=i(t,d),l++}return d}function s(t){t.sort(function(t,e){var n=f(t.center[0],t.center[1],t.center[2]),r=f(e.center[0],e.center[1],e.center[2]);return Math.abs(n[0]-r[0])>30?n[0]-r[0]:Math.abs(n[2]-r[2])>0?n[2]-r[2]:n[1]-r[1]})}function f(t,e,n){var r,o,u,a=t/255,i=e/255,c=n/255,s=Math.min(a,i,c),f=Math.max(a,i,c),d=f-s;return r=0===d?0:f===a?60*((i-c)/d%6):f===i?60*((c-a)/d+2):60*((a-i)/d+4),r<0&&(r+=360),u=(f+s)/2,o=0===d?0:d/(1-Math.abs(2*u-1)),[r,o,u]}function d(n,r){var o,u,a,i,f,d,h,v=r.seed.toString()||"1",m=r.k||16;d=e(v),h=t(n),o=document.createElement("canvas"),o.width=h.width()/2,o.height=h.height()/2,u=o.getContext("2d"),u.drawImage(n,0,0,o.width,o.height),a=u.getImageData(0,0,o.width,o.height),i=a.data,f=c(d,i,m,.1,5),s(f),l(f,t(n).siblings(".Palettes"),h)}function h(e,n,r){var o=e.center,u=t('<div class="Cluster"></div>');u.css("background","rgb("+o[0]+","+o[1]+","+o[2]+")"),u.css("width",r+"px"),n.append(u)}function l(e,n,r){var o,u,a;for($div=t('<div class="Clusters"></div>'),n.append($div),console.log("renderClusters",n),u=t.grep(e,function(t){return t.valid&&!isNaN(t.center[0]+t.center[1]+t.center[2])}),a=Math.floor(r.width()/u.length*10)/10,o=0;o<u.length;o++)h(u[o],$div,a)}function v(e){t(".analyze").each(function(n,r){r.complete?d(r,e.state):t(r).load(function(){d(this,e.state)})})}var m=new n(document.body);m.addListener(v),m.setState({seed:1,k:16})})},{}]},{},[1]);