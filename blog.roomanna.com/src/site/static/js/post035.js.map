{"version":3,"sources":["webpack:///./src/post035/main.js","webpack:///./src/post035/pointwindow.js","webpack:///./src/post035/slidingwindow.js","webpack:///./src/common/deque.js"],"names":["windowSize","maxPoints","halfPt","canvas","document","getElementById","w","parseInt","getAttribute","h","ctx","getContext","points","win","draw","clearRect","i","length","fillStyle","fillRect","winW","maxX","minX","winH","maxY","minY","strokeStyle","strokeRect","addEventListener","evt","splice","offsetX","offsetY","add","pop","PointWindow","size","minx_","Min","miny_","maxx_","Max","maxy_","x","y","value","Entry","index","SlidingWindow","compare","deque_","count_","size_","compare_","item","filter","pushTail","head","peekHead","popHead","a","b","Item","next","prev","Deque","head_","tail_","test"],"mappings":"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","file":"post035.js","sourcesContent":["import PointWindow from './pointwindow';\n\nconst windowSize = 5;\nconst maxPoints = 50;\nconst halfPt = 6;\n\nconst canvas = document.getElementById('canvas');\nconst w = parseInt(canvas.getAttribute('width'));\nconst h = parseInt(canvas.getAttribute('height'));\nconst ctx = canvas.getContext('2d');\n\nlet points = [];\nlet win = new PointWindow(windowSize);\n\nfunction draw() {\n  ctx.clearRect(0, 0, w, h);\n  for (var i = 0; i < points.length; i++) {\n    ctx.fillStyle = (i < windowSize) ? 'rgb(0,200,0)' : 'rgb(200,0,0)';\n    ctx.fillRect(points[i][0] - halfPt, points[i][1] - halfPt, halfPt * 2, halfPt * 2);\n  }\n  var winW = win.maxX - win.minX;\n  var winH = win.maxY - win.minY;\n  ctx.strokeStyle = 'rgb(0,0,200)';\n  ctx.strokeRect(win.minX, win.minY, winW, winH);\n}\n\ncanvas.addEventListener('click', function(evt) {\n  points.splice(0, 0, [evt.offsetX, evt.offsetY]);\n  win.add(evt.offsetX, evt.offsetY);\n  while (points.length > maxPoints) {\n    points.pop();\n  }\n  draw();\n});\n\nexport { PointWindow };\n\n\n\n// WEBPACK FOOTER //\n// ./src/post035/main.js","import SlidingWindow from './slidingwindow';\n\nexport default class PointWindow {\n  constructor(size) {\n    this.minx_ = new SlidingWindow(size, SlidingWindow.Min);\n    this.miny_ = new SlidingWindow(size, SlidingWindow.Min);\n    this.maxx_ = new SlidingWindow(size, SlidingWindow.Max);\n    this.maxy_ = new SlidingWindow(size, SlidingWindow.Max);\n  }\n\n  add(x, y) {\n    this.minx_.add(x);\n    this.maxx_.add(x);\n    this.miny_.add(y);\n    this.maxy_.add(y);\n  }\n\n  get minX() {\n    return this.minx_.value || 0;\n  }\n\n  get minY() {\n    return this.miny_.value || 0;\n  }\n\n  get maxX() {\n    return this.maxx_.value || 0;\n  }\n\n  get maxY() {\n    return this.maxy_.value || 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/post035/pointwindow.js","import Deque from '../common/deque';\n\nclass Entry {\n  constructor(index, value) {\n    this.index = index;\n    this.value = value;\n  }\n}\n\nexport default class SlidingWindow {\n  constructor(size, compare) {\n    this.deque_ = new Deque();\n    this.count_ = 0;\n    this.size_ = size;\n    this.compare_ = compare;\n  }\n\n  add(item) {\n    this.deque_.filter((x) => this.compare_(x.value, item));\n    this.deque_.pushTail(new Entry(this.count_, item));\n    this.count_++;\n    let head = this.deque_.peekHead();\n    while (head && head.index < (this.count_ - this.size_)) {\n      this.deque_.popHead();\n      head = this.deque_.peekHead();\n    }\n  }\n\n  get value() {\n    let head = this.deque_.peekHead();\n    return head && head.value || null;\n  }\n\n  static Max(a,b) { return a > b };\n  static Min(a,b) { return a < b };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/post035/slidingwindow.js","class Item {\n  constructor(value) {\n    this.value = value;\n    this.next = null;\n    this.prev = null;\n  }\n}\n\nexport default class Deque {\n  constructor() {\n    this.head_ = null;\n    this.tail_ = null;\n  }\n\n  pushHead(i) {\n    const item = new Item(i);\n    item.next = this.head_;\n    if (this.head_) {\n      this.head_.prev = item;\n    }\n    this.head_ = item;\n    if (!this.tail_) {\n      this.tail_ = item;\n    }\n  }\n\n  pushTail(i) {\n    const item = new Item(i);\n    item.prev = this.tail_;\n    if (this.tail_) {\n      this.tail_.next = item;\n    }\n    this.tail_ = item;\n    if (!this.head_) {\n      this.head_ = item;\n    }\n  }\n\n  popHead() {\n    const item = this.head_;\n    if (item && item.next) {\n      this.head_ = item.next;\n      item.next.prev = null;\n    } else {\n      this.head_ = null;\n      this.tail_ = null;\n    }\n    return item && item.value || null;\n  }\n\n  popTail() {\n    const item = this.tail_;\n    if (item && item.prev) {\n      this.tail_ = item.prev;\n      item.prev.next = null;\n    } else {\n      this.head_ = null;\n      this.tail_ = null;\n    }\n    return item && item.value || null;\n  }\n\n  peekHead() {\n    return this.head_ && this.head_.value || null;\n  }\n\n  peekTail() {\n    return this.tail_ && this.tail_.value || null;\n  }\n\n  filter(test) {\n    let item = this.head_;\n    while (item !== null) {\n      if (test(item.value) === false) {\n        if (item.prev === null) {\n          this.head_ = item.next;\n        } else {\n          item.prev.next = item.next;\n        }\n        if (item.next === null) {\n          this.tail_ = item.prev;\n        } else {\n          item.next.prev = item.prev;\n        }\n      }\n      item = item.next;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/deque.js"],"sourceRoot":""}